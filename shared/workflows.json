[{"createdAt":"2025-04-20T15:31:37.604Z","updatedAt":"2025-04-22T12:56:32.000Z","id":"IgHWfNufCgjtHl2N","name":"Demo: My first AI Agent in n8n","active":false,"nodes":[{"parameters":{"options":{}},"id":"5b410409-5b0b-47bd-b413-5b9b1000a063","name":"When chat message received","type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[360,20],"webhookId":"a889d2ae-2159-402f-b326-5f61e90f602e"},{"parameters":{"options":{"systemMessage":"=You're a helpful assistant that helps the user answer questions about their calendar.\n\nToday is {{ $now.format('cccc') }} the {{ $now.format('yyyy-MM-dd HH:mm') }}."}},"id":"29963449-1dc1-487d-96f2-7ff0a5c3cd97","name":"AI Agent","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[560,20]},{"parameters":{},"id":"75481370-bade-4d90-a878-3a3b0201edcc","name":"Memory","type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[660,200]},{"parameters":{"model":"google/gemini-2.5-pro-exp-03-25:free","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[540,200],"id":"a3236069-1131-4070-a142-f0ab49fc69a0","name":"OpenRouter Chat Model","credentials":{"openRouterApi":{"id":"GWbBdrAWpARJgY9C","name":"OpenRouter account"}}}],"connections":{"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"OpenRouter Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateId":"PT1i+zU92Ii5O2XCObkhfHJR5h9rNJTpiCIkYJk9jHU=","templateCredsSetupCompleted":true},"pinData":{},"versionId":"8a538d9d-3f3a-464f-852b-b5e8947f17d9","triggerCount":0,"tags":[]},{"createdAt":"2025-04-14T22:11:56.363Z","updatedAt":"2025-04-14T22:13:53.000Z","id":"R1ivEU2tjH6lA6e4","name":"Test","active":false,"nodes":[{"parameters":{"options":{"allowFileUploads":true}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[0,0],"id":"79334ff1-e5d4-407f-8239-97538d7be507","name":"When chat message received","webhookId":"2276b343-32e3-43e8-9c21-b3abe17e9185"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[220,0],"id":"b6d75eef-bb48-476d-ad95-5ccdc8fdcd31","name":"AI Agent"},{"parameters":{"model":"google/gemini-2.5-pro-exp-03-25:free","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[180,200],"id":"f8e33c3f-589d-46fc-b8fb-7395333558a9","name":"OpenRouter Chat Model","credentials":{"openRouterApi":{"id":"GWbBdrAWpARJgY9C","name":"OpenRouter account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[320,220],"id":"d85f9d53-64a3-4feb-aad3-3ac597cac0b8","name":"Simple Memory"}],"connections":{"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenRouter Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"55b73e1a-da30-40af-beaa-73122983d6dc","triggerCount":0,"tags":[]},{"createdAt":"2025-04-18T20:30:29.890Z","updatedAt":"2025-04-22T13:37:01.000Z","id":"YxHB45QpONoAudHe","name":"Wedding Invites","active":false,"nodes":[{"parameters":{"rule":{"interval":[{"triggerAtHour":11}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-220,100],"id":"a923b449-55ed-4e16-9e28-b2268b610835","name":"Schedule Trigger"},{"parameters":{"fileSelector":"/shared/couple.csv","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[0,0],"id":"712aed13-bc52-401f-91b2-a2faca5846b1","name":"Read/Write Files from Disk"},{"parameters":{"options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[220,0],"id":"69bb2a5f-886c-4d57-9dd0-d4ea3b25ff90","name":"Extract from File"},{"parameters":{"fileSelector":"/shared/guests.csv","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[0,200],"id":"6dbba935-af87-4564-8404-88aadeb92d21","name":"Read/Write Files from Disk1"},{"parameters":{"options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[220,200],"id":"46ba4cdf-a043-4622-8609-341735922bfd","name":"Extract from File1"},{"parameters":{"mode":"combine","combineBy":"combineAll","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.1,"position":[440,100],"id":"96cfc0c8-adc8-4b96-a35b-7f112878325d","name":"Merge"},{"parameters":{"method":"POST","url":"https://openrouter.ai/api/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openRouterApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"=json","bodyParameters":{"parameters":[{}]},"jsonBody":"={\n  \"model\": \"deepseek/deepseek-r1:free\",\n  \"temperature\": 0.7,\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"你是婚宴邀請函產生專家。只生成邀請函的實際內容，不要包含任何使用說明、建議或指導。不要使用方括號標記需要替換的內容。直接使用提供的資訊填入邀請函。不要在回應中提及你是AI或任何元說明。\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"請為以下賓客生成一封完全獨特的婚禮邀請函，不要套用固定模板：\\n\\n新人：{{ $('Merge').item.json.bride_name }} & {{ $('Merge').item.json.groom_name }}\\n收件人：{{ $('Merge').item.json.name }}\\n關係：{{ $('Merge').item.json.relationship }}\\n小故事：{{ $('Merge').item.json.favorite_memory }}\\n婚禮日期：{{ $('Merge').item.json.wedding_date }}\\n星期幾：{{ $('Merge').item.json.week_day }}\\n時間：{{ $('Merge').item.json.time }}\\n地點名稱：{{ $('Merge').item.json.venue_name }}\\n地點地址：{{ $('Merge').item.json.venue_address }}\\n\\n請根據關係和小故事創建真正獨特的內容，可以嘗試不同的開場白、結構、表達方式，讓每封邀請函都獨一無二。可以選擇性地加入溫馨、幽默或感性的元素，以反映賓客與新人的特殊關係，不用太詩情畫意，盡量簡單明瞭就好。\"\n    }\n  ],\n  \"temperature\": 0.7\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1100,200],"id":"40541fe9-d37e-4b6b-b9df-9b0a923b3a8a","name":"HTTP Request","credentials":{"openRouterApi":{"id":"GWbBdrAWpARJgY9C","name":"OpenRouter account"}}},{"parameters":{"sendTo":"={{$node[\"Merge\"].json.email}} ","subject":"=【{{$node[\"Merge\"].json.bride_name}}＆{{$node[\"Merge\"].json.groom_name}}】專屬家宴邀請函 ","message":"=<div style=\"font-family: 'Microsoft JhengHei', 'PingFang TC', 'Apple LiGothic Medium', sans-serif; max-width: 600px; margin: 0 auto; line-height: 1.6; color: #333; text-align: center;\">\n  <h2 style=\"color: #e86b6b; margin-bottom: 20px;\">親愛的{{ $('Merge').item.json.name }} ：</h2>\n  \n  <div style=\"text-align: left;\">\n    <p style=\"margin: 12px 0; font-size: 16px;\">嘿！我們要結婚了！</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">是的，就是我們，{{$node[\"Merge\"].json.bride_name}} 和 {{$node[\"Merge\"].json.groom_name}}！</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">{{$node[\"HTTP Request\"].json.choices[0].message.content}}</p>\n  </div>\n  \n  <div style=\"margin: 25px 0; border-left: 4px solid #e86b6b; padding-left: 15px; text-align: left;\">\n    <h3 style=\"color: #e86b6b; margin-top: 0; margin-bottom: 15px; text-align: center;\">💌【婚禮資訊】</h3>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">📅 <strong>日期：</strong>{{$node[\"Merge\"].json.wedding_date}}（星期{{$node[\"Merge\"].json.week_day}}）</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">🕠 <strong>時間：</strong>{{$node[\"Merge\"].json.time}}</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">🏛 <strong>地點：</strong>{{$node[\"Merge\"].json.venue_name}}</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">📍 <strong>地址：</strong>{{$node[\"Merge\"].json.venue_address}}</p>\n  </div>\n  \n  <div style=\"background-color: #f0f7ff; padding: 15px; border-radius: 8px; margin: 25px 0; border-left: 4px solid #5b9bd5; text-align: left;\">\n    <h3 style=\"color: #5b9bd5; text-align: center; margin-top: 0; margin-bottom: 15px;\">🔔【敬請回覆】</h3>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">為了方便我們統計人數和安排，請你在 {{$node[\"Merge\"].json.rsvp_deadline}} 前，透過  {{ $('Merge').item.json.email }}告訴我們你是否能來參加，讓我們知道可以期待看到你喔！</p>\n  </div>\n  \n  <div style=\"text-align: left;\">\n    <p style=\"margin: 12px 0; font-size: 16px;\">你的祝福與蒞臨，將是給我們最棒的結婚禮物。</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">期待在婚禮上見到你，聊聊近況，抱一個！</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">溫馨的祝福，</p>\n    \n    <p style=\"margin: 12px 0; text-align: right; font-size: 16px;\"><strong>{{$node[\"Merge\"].json.bride_name}} & {{$node[\"Merge\"].json.groom_name}} 敬邀</strong></p>\n  </div>\n</div>","options":{}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[1760,200],"id":"8c5cec63-8ef8-46fb-b24c-6cfe450c7a64","name":"Gmail","webhookId":"47b6df8e-2422-477b-941e-16ec370ee779","credentials":{"gmailOAuth2":{"id":"3kASMhO8mJHcZQZz","name":"Gmail account"}}},{"parameters":{"mode":"raw","jsonOutput":"={\n  \"bride_name\": \"小美\",\n  \"groom_name\": \"張志明\",\n  \"guest_name\": \"王小明\",\n  \"relation\": \"大學同學\",\n  \"story\": \"一起去日本背包旅行時，迷路卻意外吃到超好吃的拉麵\",\n  \"wedding_date\": \"2025-06-15\",\n  \"week_day\": \"日\",\n  \"time\": \"下午 5:30\",\n  \"venue_name\": \"晶華酒店 3 樓宴會廳\",\n  \"venue_address\": \"台北市中山區中山北路二段39巷3號\",\n  \"rsvp\": \"請回覆 0912-345-678 或 email@example.com\",\n  \"rsvp_deadline\": \"2025-05-31\"\n}\n","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[880,200],"id":"05176d6c-b56b-42d4-b66b-f82cd9715448","name":"Edit Fields1"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"5b6d6f36-742b-44cb-b6e5-07b133d87024","leftValue":"={{$node[\"Merge\"].json.language}}","rightValue":"=en","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[660,100],"id":"9e683810-bfd4-49c6-86df-ad214fac52a8","name":"If"},{"parameters":{"mode":"raw","jsonOutput":"={\n  \"role\": \"user\",\n  \"content\": \"Please write a warm and personal wedding invitation for {{ $('Merge').item.json.name }}.\\nBride: {{ $('Merge').item.json.bride_name }}, Groom: {{ $('Merge').item.json.groom_name }}\\nRelationship:{{ $('Merge').item.json.relationship }} \\nStory: {{ $('Merge').item.json.favorite_memory }}\"\n}","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[880,0],"id":"a54c9d84-98f6-4ffd-9ea1-15251f15f915","name":"Edit Fields"},{"parameters":{"method":"POST","url":"https://openrouter.ai/api/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openRouterApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"google/gemini-2.5-pro-exp-03-25:free\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are a wedding invitation specialist. Generate only the actual content of the invitation without including any instructions, suggestions, or guidance. Do not use brackets to mark content that needs to be replaced. Directly fill in the invitation with the provided information. Do not mention that you are an AI or include any meta-explanations in your response. For each guest, create a completely unique invitation - don't use a fixed template. Instead, make each letter have its own unique expression, structure, and language style. Use the guest's relationship with the couple and their shared memories to create truly personalized content.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Please generate a completely unique wedding invitation letter for the following guest. Do not use any fixed templates.Please write it in English.：\\n\\n新人：{{ $('Merge').item.json.bride_name_en }} &{{ $('Merge').item.json.groom_name_en }}\\n收件人：{{ $('Merge').item.json.name }}\\n關係：{{ $('Merge').item.json.relationship }}\\n小故事：{{ $('Merge').item.json.favorite_memory }}\\n婚禮日期：{{ $('Merge').item.json.wedding_date_en }}\\n星期幾：{{ $('Merge').item.json.week_day_en }}\\n時間：{{ $('Merge').item.json.time_en }}\\n地點名稱：{{ $('Merge').item.json.venue_name_en }}\\n地點地址：{{ $('Merge').item.json.venue_address_en }}\\n\\nCreate truly unique content based on the relationship and shared stories. Try different openings, structures, and expressions to make each invitation one-of-a-kind. Feel free to incorporate warm, humorous, or emotional elements that reflect the special relationship between the guest and the couple.\"\n    }\n  ],\n  \"temperature\": 0.9\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1100,0],"id":"9764c007-7dae-4463-86c6-f9b15abcfa24","name":"HTTP Request1","credentials":{"openRouterApi":{"id":"GWbBdrAWpARJgY9C","name":"OpenRouter account"}}},{"parameters":{"sendTo":"ss11144250@gmail.com","subject":"=【{{ $('Merge').item.json.bride_name_en }}＆{{ $('Merge').item.json.groom_name_en }}】Exclusive Family Banquet Invitation ","message":"=<div style=\"font-family: 'Arial', 'Helvetica', sans-serif; max-width: 600px; margin: 0 auto; line-height: 1.6; color: #333; text-align: center;\">\n  <h2 style=\"color: #e86b6b; margin-bottom: 20px;\">Dear {{ $('Merge').item.json.name }}:</h2>\n  \n  <div style=\"text-align: left;\">\n    <p style=\"margin: 12px 0; font-size: 16px;\">Hey! We're getting married!</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">Yes, it's us, {{$node[\"Merge\"].json.bride_name_en}} and {{$node[\"Merge\"].json.groom_name_en}}!</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">{{$node[\"HTTP Request1\"].json.choices[0].message.content}}</p>\n  </div>\n  \n  <div style=\"margin: 25px 0; border-left: 4px solid #e86b6b; padding-left: 15px; text-align: left;\">\n    <h3 style=\"color: #e86b6b; margin-top: 0; margin-bottom: 15px; text-align: center;\">💌【Wedding Details】</h3>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">📅 <strong>Date:</strong> {{$node[\"Merge\"].json.wedding_date_en}} ({{$node[\"Merge\"].json.week_day_en}})</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">🕠 <strong>Time:</strong> {{$node[\"Merge\"].json.time_en}}</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">🏛 <strong>Venue:</strong> {{$node[\"Merge\"].json.venue_name_en}}</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">📍 <strong>Address:</strong> {{$node[\"Merge\"].json.venue_address_en}}</p>\n  </div>\n  \n  <div style=\"background-color: #f0f7ff; padding: 15px; border-radius: 8px; margin: 25px 0; border-left: 4px solid #5b9bd5; text-align: left;\">\n    <h3 style=\"color: #5b9bd5; text-align: center; margin-top: 0; margin-bottom: 15px;\">🔔【Please RSVP】</h3>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">To help us with planning, please let us know if you can attend by {{$node[\"Merge\"].json.rsvp_deadline_en}} via {{ $('Merge').item.json.email }}. We're looking forward to seeing you there!</p>\n  </div>\n  \n  <div style=\"text-align: left;\">\n    <p style=\"margin: 12px 0; font-size: 16px;\">Your blessing and presence would be the best wedding gift we could receive.</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">We can't wait to see you at the wedding, catch up, and share a hug!</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">With warm wishes,</p>\n    \n    <p style=\"margin: 12px 0; text-align: right; font-size: 16px;\"><strong>{{$node[\"Merge\"].json.bride_name_en}} & {{$node[\"Merge\"].json.groom_name_en}}</strong></p>\n  </div>\n</div>","options":{}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[1760,0],"id":"697690e1-9cdc-4109-b546-c928db590471","name":"Gmail1","webhookId":"5ca0d0db-e2e1-4158-a98e-907f3bf71298","credentials":{"gmailOAuth2":{"id":"3kASMhO8mJHcZQZz","name":"Gmail account"}}},{"parameters":{"assignments":{"assignments":[{"id":"05d01cdc-9369-4164-a04a-41e1dc6d38e9","name":"processedContent","value":"={{$node[\"HTTP Request1\"].json.choices[0].message.content}}","type":"string"}]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1540,0],"id":"48d12a3f-a19c-4b4a-873e-8ba3a870bbcb","name":"Edit Fields2"},{"parameters":{"assignments":{"assignments":[{"id":"fe2b31fe-2f4f-4aae-b409-119bb37348cd","name":"processedContent","value":"={{$node[\"HTTP Request\"].json.choices[0].message.content}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1540,200],"id":"7a660706-c15b-4890-bb39-5bffc5ad431f","name":"Edit Fields3"},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1320,0],"id":"46b65e47-afde-49d3-a05f-bcf57e367a78","name":"Wait","webhookId":"dbd679cd-cd47-4fe6-8f1b-d7a3db4f341d"},{"parameters":{"amount":25},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1320,200],"id":"ba5f34af-cdfd-4800-8c92-4a7f279f32e5","name":"Wait1","webhookId":"dbd679cd-cd47-4fe6-8f1b-d7a3db4f341d"}],"connections":{"Schedule Trigger":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0},{"node":"Read/Write Files from Disk1","type":"main","index":0}]]},"Read/Write Files from Disk":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Read/Write Files from Disk1":{"main":[[{"node":"Extract from File1","type":"main","index":0}]]},"Extract from File1":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Merge":{"main":[[{"node":"If","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"Edit Fields1":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"If":{"main":[[{"node":"Edit Fields","type":"main","index":0}],[{"node":"Edit Fields1","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"HTTP Request1","type":"main","index":0}]]},"HTTP Request1":{"main":[[{"node":"Wait","type":"main","index":0}]]},"Edit Fields2":{"main":[[{"node":"Gmail1","type":"main","index":0}]]},"Edit Fields3":{"main":[[{"node":"Gmail","type":"main","index":0}]]},"Wait":{"main":[[{"node":"Edit Fields2","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"Edit Fields3","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"5f2302c5-0edc-4ef5-834d-eda93896ada5","triggerCount":0,"tags":[]},{"createdAt":"2025-04-21T20:55:22.002Z","updatedAt":"2025-04-22T11:20:33.000Z","id":"8epEEjaDtIU96Ar0","name":"My workflow","active":false,"nodes":[{"parameters":{"rule":{"interval":[{"triggerAtHour":11}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-220,100],"id":"9cf51f02-6e86-4d77-9c43-10b65f9cb68c","name":"Schedule Trigger"},{"parameters":{"fileSelector":"/shared/couple.csv","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[0,0],"id":"37f2034f-3bde-488c-af17-82fadd1ea8d1","name":"Read/Write Files from Disk"},{"parameters":{"options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[220,0],"id":"34cdcd6d-32e2-4644-a5c2-98c0515eb4dd","name":"Extract from File"},{"parameters":{"fileSelector":"/shared/guests.csv","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[0,200],"id":"da1b41ee-bd62-4c37-bdea-e266de4002c3","name":"Read/Write Files from Disk1"},{"parameters":{"options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[220,200],"id":"b96b74cf-c93f-4ee8-90f2-787f4cd74451","name":"Extract from File1"},{"parameters":{"mode":"combine","combineBy":"combineAll","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.1,"position":[440,100],"id":"bcc4e8a1-5db6-4755-9f02-bb073b00dd1a","name":"Merge"},{"parameters":{"method":"POST","url":"https://openrouter.ai/api/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openRouterApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"=json","bodyParameters":{"parameters":[{}]},"jsonBody":"={\n  \"model\": \"google/gemini-2.5-pro-exp-03-25:free\",\n  \"temperature\": 0.7,\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"你是婚禮邀請函產生專家。只生成邀請函的實際內容，不要包含任何使用說明、建議或指導。不要使用方括號標記需要替換的內容。直接使用提供的資訊填入邀請函。不要在回應中提及你是AI或任何元說明。\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"請為以下賓客生成一封完全獨特的婚禮邀請函，不要套用固定模板：\\n\\n新人：{{ $('Merge').item.json.bride_name }} & {{ $('Merge').item.json.groom_name }}\\n收件人：{{ $('Merge').item.json.name }}\\n關係：{{ $('Merge').item.json.relationship }}\\n小故事：{{ $('Merge').item.json.favorite_memory }}\\n婚禮日期：{{ $('Merge').item.json.wedding_date }}\\n星期幾：{{ $('Merge').item.json.week_day }}\\n時間：{{ $('Merge').item.json.time }}\\n地點名稱：{{ $('Merge').item.json.venue_name }}\\n地點地址：{{ $('Merge').item.json.venue_address }}\\n\\n請根據關係和小故事創建真正獨特的內容，可以嘗試不同的開場白、結構、表達方式，讓每封邀請函都獨一無二。可以選擇性地加入溫馨、幽默或感性的元素，以反映賓客與新人的特殊關係。\"\n    }\n  ],\n  \"temperature\": 0.9\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1100,200],"id":"3d088bba-9337-4ffc-b5ad-b1f76f6b6bd7","name":"HTTP Request","credentials":{"openRouterApi":{"id":"GWbBdrAWpARJgY9C","name":"OpenRouter account"}}},{"parameters":{"sendTo":"={{$node[\"Merge\"].json.email}} ","subject":"=【{{$node[\"Merge\"].json.bride_name}}＆{{$node[\"Merge\"].json.groom_name}}】專屬家宴邀請函 ","message":"=<div style=\"font-family: 'Microsoft JhengHei', 'PingFang TC', 'Apple LiGothic Medium', sans-serif; max-width: 600px; margin: 0 auto; line-height: 1.6; color: #333; text-align: center;\">\n  <h2 style=\"color: #e86b6b; margin-bottom: 20px;\">親愛的 {{$node[\"Merge\"].json.name}}：</h2>\n  \n  <div style=\"text-align: left;\">\n    <p style=\"margin: 12px 0; font-size: 16px;\">嘿！我們要結婚了！</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">是的，就是我們，{{$node[\"Merge\"].json.bride_name}} 和 {{$node[\"Merge\"].json.groom_name}}！</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">{{$node[\"HTTP Request\"].json.choices[0].message.content}}</p>\n  </div>\n  \n  <div style=\"margin: 25px 0; border-left: 4px solid #e86b6b; padding-left: 15px; text-align: left;\">\n    <h3 style=\"color: #e86b6b; margin-top: 0; margin-bottom: 15px; text-align: center;\">💌【婚禮資訊】</h3>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">📅 <strong>日期：</strong>{{$node[\"Merge\"].json.wedding_date}}（星期{{$node[\"Merge\"].json.week_day}}）</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">🕠 <strong>時間：</strong>{{$node[\"Merge\"].json.time}}</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">🏛 <strong>地點：</strong>{{$node[\"Merge\"].json.venue_name}}</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">📍 <strong>地址：</strong>{{$node[\"Merge\"].json.venue_address}}</p>\n  </div>\n  \n  <div style=\"background-color: #f0f7ff; padding: 15px; border-radius: 8px; margin: 25px 0; border-left: 4px solid #5b9bd5; text-align: left;\">\n    <h3 style=\"color: #5b9bd5; text-align: center; margin-top: 0; margin-bottom: 15px;\">🔔【敬請回覆】</h3>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">為了方便我們統計人數和安排，請你在 {{$node[\"Merge\"].json.rsvp_deadline}} 前，透過  {{ $('Merge').item.json.email }}告訴我們你是否能來參加，讓我們知道可以期待看到你喔！</p>\n  </div>\n  \n  <div style=\"text-align: left;\">\n    <p style=\"margin: 12px 0; font-size: 16px;\">你的祝福與蒞臨，將是給我們最棒的結婚禮物。</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">期待在婚禮上見到你，聊聊近況，抱一個！</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">溫馨的祝福，</p>\n    \n    <p style=\"margin: 12px 0; text-align: right; font-size: 16px;\"><strong>{{$node[\"Merge\"].json.bride_name}} & {{$node[\"Merge\"].json.groom_name}} 敬邀</strong></p>\n  </div>\n</div>","options":{}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[1760,200],"id":"b791bb0f-c05b-43e3-8e65-82b58e83badc","name":"Gmail","webhookId":"47b6df8e-2422-477b-941e-16ec370ee779","credentials":{"gmailOAuth2":{"id":"3kASMhO8mJHcZQZz","name":"Gmail account"}}},{"parameters":{"mode":"raw","jsonOutput":"={\n  \"bride_name\": \"小美\",\n  \"groom_name\": \"張志明\",\n  \"guest_name\": \"王小明\",\n  \"relation\": \"大學同學\",\n  \"story\": \"一起去日本背包旅行時，迷路卻意外吃到超好吃的拉麵\",\n  \"wedding_date\": \"2025-06-15\",\n  \"week_day\": \"日\",\n  \"time\": \"下午 5:30\",\n  \"venue_name\": \"晶華酒店 3 樓宴會廳\",\n  \"venue_address\": \"台北市中山區中山北路二段39巷3號\",\n  \"rsvp\": \"請回覆 0912-345-678 或 email@example.com\",\n  \"rsvp_deadline\": \"2025-05-31\"\n}\n","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[880,200],"id":"7efec881-9994-4350-a9e1-e798bc02ad81","name":"Edit Fields1"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"5b6d6f36-742b-44cb-b6e5-07b133d87024","leftValue":"={{$node[\"Merge\"].json.language}}","rightValue":"=en","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"looseTypeValidation":true,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[660,100],"id":"e86c95f5-d563-459d-9699-ffc13a59b27e","name":"If"},{"parameters":{"mode":"raw","jsonOutput":"={\n  \"role\": \"user\",\n  \"content\": \"Please write a warm and personal wedding invitation for {{ $('Merge').item.json.name }}.\\nBride: {{ $('Merge').item.json.bride_name }}, Groom: {{ $('Merge').item.json.groom_name }}\\nRelationship:{{ $('Merge').item.json.relationship }} \\nStory: {{ $('Merge').item.json.favorite_memory }}\"\n}","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[880,0],"id":"a17eb278-de58-45eb-a634-384ec4daabe8","name":"Edit Fields"},{"parameters":{"method":"POST","url":"https://openrouter.ai/api/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openRouterApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"google/gemini-2.5-pro-exp-03-25:free\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are a wedding invitation specialist. Generate only the actual content of the invitation without including any instructions, suggestions, or guidance. Do not use brackets to mark content that needs to be replaced. Directly fill in the invitation with the provided information. Do not mention that you are an AI or include any meta-explanations in your response. For each guest, create a completely unique invitation - don't use a fixed template. Instead, make each letter have its own unique expression, structure, and language style. Use the guest's relationship with the couple and their shared memories to create truly personalized content.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Please generate a completely unique wedding invitation letter for the following guest. Do not use any fixed templates.Please write it in English.：\\n\\n新人：{{ $('Merge').item.json.bride_name_en }} &{{ $('Merge').item.json.groom_name_en }}\\n收件人：{{ $('Merge').item.json.name }}\\n關係：{{ $('Merge').item.json.relationship }}\\n小故事：{{ $('Merge').item.json.favorite_memory }}\\n婚禮日期：{{ $('Merge').item.json.wedding_date_en }}\\n星期幾：{{ $('Merge').item.json.week_day_en }}\\n時間：{{ $('Merge').item.json.time_en }}\\n地點名稱：{{ $('Merge').item.json.venue_name_en }}\\n地點地址：{{ $('Merge').item.json.venue_address_en }}\\n\\nCreate truly unique content based on the relationship and shared stories. Try different openings, structures, and expressions to make each invitation one-of-a-kind. Feel free to incorporate warm, humorous, or emotional elements that reflect the special relationship between the guest and the couple.\"\n    }\n  ],\n  \"temperature\": 0.9\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1100,0],"id":"d658bf4a-c2f5-44ce-874d-d99328e85c35","name":"HTTP Request1","credentials":{"openRouterApi":{"id":"GWbBdrAWpARJgY9C","name":"OpenRouter account"}}},{"parameters":{"sendTo":"ss11144250@gmail.com","subject":"=【{{ $('Merge').item.json.bride_name_en }}＆{{ $('Merge').item.json.groom_name_en }}】Exclusive Family Banquet Invitation ","message":"=<div style=\"font-family: 'Arial', 'Helvetica', sans-serif; max-width: 600px; margin: 0 auto; line-height: 1.6; color: #333; text-align: center;\">\n  <h2 style=\"color: #e86b6b; margin-bottom: 20px;\">Dear {{$node[\"Merge\"].json.name}}:</h2>\n  \n  <div style=\"text-align: left;\">\n    <p style=\"margin: 12px 0; font-size: 16px;\">Hey! We're getting married!</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">Yes, it's us, {{$node[\"Merge\"].json.bride_name_en}} and {{$node[\"Merge\"].json.groom_name_en}}!</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">{{$node[\"HTTP Request1\"].json.choices[0].message.content}}</p>\n  </div>\n  \n  <div style=\"margin: 25px 0; border-left: 4px solid #e86b6b; padding-left: 15px; text-align: left;\">\n    <h3 style=\"color: #e86b6b; margin-top: 0; margin-bottom: 15px; text-align: center;\">💌【Wedding Details】</h3>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">📅 <strong>Date:</strong> {{$node[\"Merge\"].json.wedding_date_en}} ({{$node[\"Merge\"].json.week_day_en}})</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">🕠 <strong>Time:</strong> {{$node[\"Merge\"].json.time_en}}</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">🏛 <strong>Venue:</strong> {{$node[\"Merge\"].json.venue_name_en}}</p>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">📍 <strong>Address:</strong> {{$node[\"Merge\"].json.venue_address_en}}</p>\n  </div>\n  \n  <div style=\"background-color: #f0f7ff; padding: 15px; border-radius: 8px; margin: 25px 0; border-left: 4px solid #5b9bd5; text-align: left;\">\n    <h3 style=\"color: #5b9bd5; text-align: center; margin-top: 0; margin-bottom: 15px;\">🔔【Please RSVP】</h3>\n    \n    <p style=\"margin: 10px 0; font-size: 16px;\">To help us with planning, please let us know if you can attend by {{$node[\"Merge\"].json.rsvp_deadline_en}} via {{ $('Merge').item.json.email }}. We're looking forward to seeing you there!</p>\n  </div>\n  \n  <div style=\"text-align: left;\">\n    <p style=\"margin: 12px 0; font-size: 16px;\">Your blessing and presence would be the best wedding gift we could receive.</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">We can't wait to see you at the wedding, catch up, and share a hug!</p>\n    \n    <p style=\"margin: 12px 0; font-size: 16px;\">With warm wishes,</p>\n    \n    <p style=\"margin: 12px 0; text-align: right; font-size: 16px;\"><strong>{{$node[\"Merge\"].json.bride_name_en}} & {{$node[\"Merge\"].json.groom_name_en}}</strong></p>\n  </div>\n</div>","options":{}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[1760,0],"id":"e63f8fd4-3ec2-43da-944d-26fdcc9ef078","name":"Gmail1","webhookId":"5ca0d0db-e2e1-4158-a98e-907f3bf71298","credentials":{"gmailOAuth2":{"id":"3kASMhO8mJHcZQZz","name":"Gmail account"}}},{"parameters":{"assignments":{"assignments":[{"id":"05d01cdc-9369-4164-a04a-41e1dc6d38e9","name":"processedContent","value":"={{$node[\"HTTP Request1\"].json.choices[0].message.content}}","type":"string"}]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1540,0],"id":"27820f38-beb1-4310-b14a-d3775fa1c532","name":"Edit Fields2"},{"parameters":{"assignments":{"assignments":[{"id":"fe2b31fe-2f4f-4aae-b409-119bb37348cd","name":"processedContent","value":"={{$node[\"HTTP Request\"].json.choices[0].message.content}}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1540,200],"id":"70ffb4a8-fae6-4c79-9204-d818258de580","name":"Edit Fields3"},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1320,0],"id":"f74824eb-dfa7-4f1f-95a6-6ff9554140f2","name":"Wait","webhookId":"dbd679cd-cd47-4fe6-8f1b-d7a3db4f341d"},{"parameters":{"amount":15},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1320,200],"id":"4cb19658-7528-4e7a-87c1-1f9f20d31e10","name":"Wait1","webhookId":"dbd679cd-cd47-4fe6-8f1b-d7a3db4f341d"}],"connections":{"Schedule Trigger":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0},{"node":"Read/Write Files from Disk1","type":"main","index":0}]]},"Read/Write Files from Disk":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Read/Write Files from Disk1":{"main":[[{"node":"Extract from File1","type":"main","index":0}]]},"Extract from File1":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Merge":{"main":[[{"node":"If","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"Edit Fields1":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"If":{"main":[[{"node":"Edit Fields","type":"main","index":0}],[{"node":"Edit Fields1","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"HTTP Request1","type":"main","index":0}]]},"HTTP Request1":{"main":[[{"node":"Wait","type":"main","index":0}]]},"Edit Fields2":{"main":[[{"node":"Gmail1","type":"main","index":0}]]},"Edit Fields3":{"main":[[{"node":"Gmail","type":"main","index":0}]]},"Gmail":{"main":[[]]},"Wait":{"main":[[{"node":"Edit Fields2","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"Edit Fields3","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c00d6701-8a3b-4279-bc04-0b3b84a59ecf","triggerCount":0,"tags":[]}]